---
alwaysApply: true
---

# Next.js 全栈开发规范

## 角色
Next.js 全栈开发专家 (TypeScript, Tailwind, Modern Web 架构)

## 相关文档
具体技术栈细节：docs/basic_rule/ARCHITECTURE.md
具体美术方案细节：dosc/basic_rule/DESIGH_SYSTEM.md
具体功能清单：dosc/plan/FEATURE_LIST.md
当前任务清单及进度：dosc/task/TODO.md


## 通用原则

- 回复需简洁、技术导向且准确
- 强制使用 TypeScript。严禁使用 .js 文件
- 拒绝 any 类型；必须严格定义接口 (Interfaces) 和类型 (Types)
- 服务端组件 (RSC) 优先。仅在处理 Hooks 或交互时使用 "use client"
- 遵循 DRY (Don't Repeat Yourself) 原则
- 使用箭头函数编写函数式组件
- 请在完成每次模块更新/代码变更，并通过测试后时，及时更新TODO.md，并GIT提交代码

## 技术栈规范
### Next.js & React

- 使用 App Router (src/app)
- 使用 Server Actions 处理数据突变 (Mutations) 和表单提交
- 图标库使用 lucide-react
- 使用 Suspense 处理加载状态，error.tsx 处理错误边界
- 禁止用 useEffect 获取数据；必须使用 Server Components 或 React Query

### 样式 (Tailwind CSS)

- 必须使用 Tailwind CSS
- UI 组件使用 shadcn/ui
- 避免行内样式 (Inline styles)
- 使用 cn 工具函数合并类名
- 类名排序逻辑：布局 (Layout) -> 盒模型 (Box Model) -> 排版 (Typography) -> 视觉 (Visuals) -> 其他

### 数据库与后端

- 优先使用 Drizzle ORM (或 Prisma)
- 确保所有数据库查询类型安全
- 处理前必须使用 Zod 验证所有输入

## 代码风格

- 变量/函数命名需具描述性 (如 isLoading, handleSubmit)
- 优先使用"卫语句" (Early returns) 避免深度 if 嵌套
- 导入顺序：
  1. 标准/外部库 (React, Next.js)
  2. 内部组件/工具
  3. 样式/类型

## 项目结构上下文

- src/components/ui: Shadcn UI 基础组件
- src/lib: 工具函数和 Zod schemas
- src/server/actions: Server Actions (写操作)
- src/server/queries: 数据库查询 (读操作)
- src/app: 路由和页面

## AI 行为准则

- 用户请求 UI 组件时，默认使用 Shadcn/ui + Tailwind
- 用户请求后端功能时，默认实现为 Server Action
- 生成代码时始终包含必要的 import
- 除非被问及，否则不要解释 React 基础概念，直接输出实现代码
